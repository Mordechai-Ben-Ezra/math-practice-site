<!DOCTYPE html>

<html lang="he" dir="rtl">
<head>
  <!-- Google tag (gtag.js) -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=G-N0RXR5B7Y0"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'G-N0RXR5B7Y0');
  </script>
  <link rel="sitemap" type="application/xml" title="Sitemap" href="sitemap.xml" />
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <meta name="robots" content="index, follow" />
  <meta name="description" content="תרגול חשבון מתמטי בכיף: חיבור, חיסור, כפל וחילוק ברמות שונות. שפרו מהירות ודיוק בלימוד עצמי." />
  <meta name="keywords" content="תרגול חשבון, חשבון מהיר, חיבור, חיסור, כפל, חילוק, למידה עצמאית" />
  <link rel="canonical" href="https://mordechai-ben-ezra.github.io/math-practice-site/" />
  <link rel="icon" type="image/png" sizes="32x32" href="favicon-32x32.png" />
  <link rel="icon" type="image/png" sizes="16x16" href="favicon-16x16.png" />
  <meta property="og:title" content="🏆 תרגול חשבון חינמי אונליין – תרגילים אינטראקטיביים" />
  <meta property="og:description" content="תרגול חשבון בתרגילים מגוונים ובכיף – לחיבור, חיסור, כפל וחילוק." />
  <meta property="og:type" content="website" />
  <meta property="og:url" content="https://mordechai-ben-ezra.github.io/math-practice-site/" />
  <meta property="og:image" content="https://mordechai-ben-ezra.github.io/math-practice-site/images/preview.png" />
  <script type="application/ld+json">
    {"@context":"https://schema.org","@type":"WebSite","url":"https://mordechai-ben-ezra.github.io/math-practice-site/","name":"🏆 תרגול חשבון חינמי אונליין – תרגילים אינטראקטיביים","description":"תרגול חשבון מתמטי בכיף: חיבור, חיסור, כפל וחילוק ברמות שונות."}
  </script>
  <title>🏆 תרגול חשבון חינמי אונליין – תרגילים אינטראקטיביים</title>
  <link href="https://fonts.googleapis.com/css2?family=Rubik:wght@400;700&display=swap" rel="stylesheet" />
  <style>
    :root { --primary:#007bff;--success:#28a745;--error:#dc3545;--bg:#f0f4f8;--card:#fff;--text:#333;--radius:8px;--transition:.3s;--opt1:#ffadad;--opt2:#ffd6a5;--opt3:#caffbf;--opt4:#9bf6ff }
    * { box-sizing:border-box }
    body { margin:0;padding:1rem;font-family:'Rubik',sans-serif;background:var(--bg);color:var(--text) }
    header {
      position: relative;
      text-align: center;
      padding: 1rem;
    }
    .share-buttons { display:flex;justify-content:center;gap:1rem;margin-top:1rem }
    .share-buttons a { text-decoration:none;font-size:1.2rem;background:var(--primary);color:#fff;padding:.5rem 1rem;border-radius:var(--radius) }
    #appContainer { max-width:800px;margin:auto;background:var(--card);padding:1rem;border-radius:12px;box-shadow:0 2px 8px rgba(0,0,0,0.1) }
    footer { text-align:center;font-size:.9rem;color:#666;margin-top:3rem }
    h1,h2 { text-align:center;color:var(--primary);margin:.5em 0 }
    section { display:none;background:var(--card);border-radius:var(--radius);padding:1rem;margin-bottom:1.5rem }
    section.active { display:flex;flex-direction:column;gap:1rem }
    #openSettings { left:1rem }
    #toggleSound  { left:3rem }
    /* תמיד להציג את כפתורי ההגדרות והשמע קבועים במסך */
    #openSettings,
    #toggleSound {
      position: fixed;
      top: 1rem;
      background: none;
      border: none;
      font-size: 1.5rem;
      cursor: pointer;
      z-index: 1000;
    }
        /* סגנון לכפתור הבית בפינה הימנית־עליונה */
    #homeBtn {
      position: absolute;
      top: 1rem;
      right: 1rem;
      background: none;
      border: none;
      font-size: 1.5rem;
      cursor: pointer;
    }
    .modes-row { display:flex;gap:.5rem;width:100% }
    .mode-btn { flex:1;padding:1rem;border:none;border-radius:var(--radius);background:var(--primary);color:#fff;font-size:1.5rem;cursor:pointer }
    .mode-btn.selected { background:var(--success) }
    #startQuiz { width:100%;padding:1rem;font-size:1.2rem;border:none;border-radius:var(--radius);background:var(--primary);color:#fff;cursor:pointer }
    #startQuiz.hidden { display:none }
    .input-group { display:flex;gap:.5rem;align-items:center }
    input[type=number] { width:4rem;padding:.4rem;border:1px solid #ccc;border-radius:var(--radius) }
    #scoreboard,#mainScoreboard,#levelDisplay { text-align:center;font-size:1.2rem }
    #scoreboard { visibility:hidden }
    #question { width:100%;text-align:center;font-size:1.5em;direction:ltr }
    .option-btn { display:block;width:100%;padding:1rem;margin:.5rem 0;border:none;border-radius:var(--radius);cursor:pointer;font-size:1.5rem }
    .option-btn.opt1 { background:var(--opt1) } .option-btn.opt2 { background:var(--opt2) } .option-btn.opt3 { background:var(--opt3) } .option-btn.opt4 { background:var(--opt4) }
    .option-btn.correct { background:var(--success)!important;color:#fff } .option-btn.wrong { background:var(--error)!important;color:#fff }
    .reset-small { width:auto;font-size:.8rem;padding:.4rem .8rem;align-self:flex-end }
    #detailModal { display:none;position:fixed;top:0;left:0;width:100%;height:100%;background:rgba(0,0,0,.6);align-items:center;justify-content:center }
    #detailModal.show { display:flex }
    .modal-content { background:#fff;padding:1rem;border-radius:var(--radius);width:90%;max-width:400px }
    @keyframes zigzagUp { 0%{opacity:1;transform:translate(0,0) rotate(0deg)}25%{transform:translate(-.5rem,-2rem) rotate(-2deg)}50%{transform:translate(0,-5rem) rotate(2deg)}75%{transform:translate(.5rem,-8rem) rotate(-2deg)}100%{opacity:0;transform:translate(0,-15rem) rotate(0deg)} }
    .zigzagUp { position:absolute;display:inline-block;pointer-events:none;z-index:1000;animation:zigzagUp 1s ease-out forwards;transform-origin:center }
    .zigzagPositive { color:var(--success);font-size:3rem;font-weight:bold }
    .zigzagNegative { color:var(--error);font-size:2rem;font-weight:bold }
  </style>

  <!-- PWA manifest and meta tags -->
  <link rel="manifest" href="site.webmanifest" />
  <meta name="theme-color" content="#007bff" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="default" />
  <meta name="apple-mobile-web-app-title" content="🏆 תרגול חשבון חינמי אונליין – תרגילים אינטראקטיביים" />
  <link rel="apple-touch-icon" sizes="180x180" type="image/png" href="apple-touch-icon.png" />


<script type="application/ld+json">
{
  "@context":"https://schema.org",
  "@type":"WebSite",
  "url":"https://mordechai-ben-ezra.github.io/math-practice-site/",
  "name":"🏆 תרגול חשבון חינמי אונליין – תרגילים אינטראקטיביים",
  "description":"תרגול חשבון מתמטי בכיף: חיבור, חיסור, כפל וחילוק ברמות שונות.",
  "potentialAction": {
    "@type":"SearchAction",
    "target":"https://mordechai-ben-ezra.github.io/math-practice-site/?q={search_term_string}",
    "query-input":"required name=search_term_string"
  }
}
</script>

</head>
<body>
  <header>
    <h1 id="site-title">🏆 תרגול חשבון חינמי אונליין – תרגילים אינטראקטיביים</h1>
    <p>תרגול חשבון מהנה ואינטראקטיבי עם ניקוד, זמן ורמות קושי משתנות!</p>
    <button id="homeBtn" title="בית">🏠</button>
    <button id="openSettings">⚙️</button>
    <button id="toggleSound" title="הפעל/כבה צלילים">🔊</button>
</header>
  <div class="share-buttons">
    <a href="https://wa.me/?text=תרגול%20חשבון%20מנצח:%20https://mordechai-ben-ezra.github.io/math-practice-site" target="_blank">שתף בוואטסאפ</a>
    <a href="mailto:?subject=משחק חשבון מגניב!&body=נסה את תרגול חשבון מנצח: https://mordechai-ben-ezra.github.io/math-practice-site" target="_blank">שלח במייל</a>
  </div>
  <main id="appContainer">
    <!-- Main Menu -->
    <section id="mainMenu" class="active">
      <div id="mainScoreboard">נקודות מצטברות: <span id="mainScore">0</span></div>
      <div id="levelDisplay">רמה: <span id="level">1</span></div>
      <div class="modes-row">
        <button class="mode-btn" data-type="add">➕</button>
        <button class="mode-btn" data-type="sub">➖</button>
      </div>
      <div class="modes-row">
        <button class="mode-btn" data-type="mul">✖️</button>
        <button class="mode-btn" data-type="div">➗</button>
      </div>
      <button class="mode-btn" data-type="mix">🔀</button>
      <button id="startQuiz" class="hidden">▶️ התחל בתרגול</button>
    </section>
    <!-- Settings -->
    <section id="setup">
      <h2>הגדרות התרגול</h2>
      <div class="input-group"><label for="min">מ</label><input id="min" type="number" min="1" value="1"/></div>
      <div class="input-group"><label for="max">עד</label><input id="max" type="number" min="1" value="10"/></div>
      <div class="input-group"><label for="timePerQ">זמן לשאלה (שניות)</label><input id="timePerQ" type="number" min="1" value="12"/></div>
      <button id="applySettings" class="hidden">שמור הגדרות</button>
      <button id="resetScore" class="reset-small">אפס ניקוד</button>
    </section>
    <!-- Quiz -->
    <section id="quiz">
      <div id="scoreboard">נקודות: <span id="score">0</span></div>
      <h2>תרגיל <span id="currentNum"></span></h2>
      <div id="timer">זמן נותר: <span id="timeDisplay"></span></div>
      <div id="question"></div>
      <div id="options"></div>
    </section>
    <!-- Results -->
    <section id="results">
      <h2>התוצאות שלך</h2>
      <ul id="resultsList"></ul>
      <button id="restart" class="primary">נסה שוב</button>
    </section>
  </main>
  <div id="detailModal"><div class="modal-content"><h3 id="detailTitle"></h3><p id="detailQuestion"></p><p id="detailYour"></p><p id="detailCorrect"></p><button id="detailClose" class="primary">סגור</button></div></div>
  <audio id="soundCorrect" src="https://actions.google.com/sounds/v1/cartoon/clang_and_wobble.ogg" preload="auto"></audio>
  <audio id="soundWrong"   src="https://actions.google.com/sounds/v1/cartoon/metal_hit_and_slide.ogg" preload="auto"></audio>
  <audio id="soundCheer"   src="https://actions.google.com/sounds/v1/cartoon/cheer.ogg" preload="auto"></audio>
  <audio id="soundFail" src="https://actions.google.com/sounds/v1/impacts/crash.ogg" preload="auto"></audio>
  <script>
    document.addEventListener('DOMContentLoaded', () => {
      const screens = {
        mainMenu: document.getElementById('mainMenu'),
        setup: document.getElementById('setup'),
        quiz: document.getElementById('quiz'),
        results: document.getElementById('results')
      };
      function showScreen(name) {
        Object.values(screens).forEach(s => s.classList.remove('active'));
        screens[name].classList.add('active');
      }
      let settings = { min:1, max:10, perQ:12 };
      let selectedTypes = new Set();
      const modeBtns = document.querySelectorAll('.mode-btn');
      const openSettings = document.getElementById('openSettings');
      const toggleSound = document.getElementById('toggleSound');  
      const homeBtn     = document.getElementById('homeBtn');
      // ברירת מחדל: צלילים מופעלים אלא אם צוין אחרת  
      let soundEnabled = localStorage.getItem('soundEnabled') !== 'false';  
      // עדכון האייקון בהתאם למצב  
      toggleSound.textContent = soundEnabled ? '🔊' : '🔇';  
      toggleSound.addEventListener('click', () => {  
        soundEnabled = !soundEnabled;  
        localStorage.setItem('soundEnabled', soundEnabled);  
        toggleSound.textContent = soundEnabled ? '🔊' : '🔇';  
      });  
      const applySettings = document.getElementById('applySettings');
      const startQuiz = document.getElementById('startQuiz');
      const resetScore = document.getElementById('resetScore');
      const restart = document.getElementById('restart');
      const detailClose = document.getElementById('detailClose');
      const scoreBoard = document.getElementById('scoreboard');
      const scoreEl = document.getElementById('score');
      const mainScoreEl = document.getElementById('mainScore');
      const levelEl = document.getElementById('level');
      const currentNumEl = document.getElementById('currentNum');
      const totalNumEl = document.getElementById('totalNum');
      const questionEl = document.getElementById('question');
      const optionsEl = document.getElementById('options');
      const timerEl = document.getElementById('timeDisplay');
      const progressBar = document.getElementById('progress');
      const progressText = document.getElementById('progressText');
      const resultsList = document.getElementById('resultsList');
      const soundC = document.getElementById('soundCorrect');
      const soundW = document.getElementById('soundWrong');
      const soundCh = document.getElementById('soundCheer');
      const soundF = document.getElementById('soundFail');
      let exercises = [], answers = [], userAnswers = [], currentIndex = 0, countdown, nextQuestionTimeout;
      let score = parseInt(localStorage.getItem('cumScore'))||0;
      let level = parseInt(localStorage.getItem('level'))||1;
      mainScoreEl.textContent = score;
      levelEl.textContent = level;
      modeBtns.forEach(btn => {
        btn.addEventListener('click', () => {
          const type = btn.dataset.type;
          if (type==='mix') {
            selectedTypes.clear();
            modeBtns.forEach(b=>b.classList.remove('selected'));
            selectedTypes.add('mix');
            btn.classList.add('selected');
          } else {
            if (selectedTypes.has('mix')) {
              selectedTypes.delete('mix');
              document.querySelector('[data-type="mix"]').classList.remove('selected');
            }
            if (selectedTypes.has(type)) {
              selectedTypes.delete(type);
              btn.classList.remove('selected');
            } else {
              selectedTypes.add(type);
              btn.classList.add('selected');
            }
            const basic = ['add','sub','mul','div'];
            if (basic.every(t=>selectedTypes.has(t))) {
              basic.forEach(t=>{ selectedTypes.delete(t); document.querySelector(`[data-type="${t}"]`).classList.remove('selected'); });
              selectedTypes.add('mix');
              document.querySelector('[data-type="mix"]').classList.add('selected');
            }
          }
          startQuiz.classList.toggle('hidden', selectedTypes.size===0);
        });
      });
      openSettings.addEventListener('click', () => {
        clearInterval(countdown);
        clearTimeout(nextQuestionTimeout);
        applySettings.classList.add('hidden');
        openSettings.style.display = 'none';
        toggleSound.style.display  = 'none';
        showScreen('setup');
      });
      ['min','max','timePerQ'].forEach(id=>
      document.getElementById(id)
      .addEventListener('input',()=>applySettings.classList.remove('hidden'))
      );
      applySettings.addEventListener('click', () => {
        // 1. עדכון ההגדרות מתוך השדות במסך
        settings.min  = Math.max(1,  Math.ceil(+document.getElementById('min').value));
        settings.max  = Math.max(settings.min, Math.ceil(+document.getElementById('max').value));
        settings.perQ = Math.max(1,  Math.ceil(+document.getElementById('timePerQ').value));
        // 2. הסתרת כפתור השמירה והחזרה לתפריט הראשי
        applySettings.classList.add('hidden');
        showScreen('mainMenu');
        // 3. החזרת הכפתורים ⚙️ ו־🔊 למסך הראשי
        openSettings.style.display = 'block';
        toggleSound.style.display  = 'block';
      });
      resetScore.addEventListener('click',()=>{
        if(confirm('האם אתה בטוח שברצונך לאפס את הנקוד?')) {
          score=0; level=1;
          localStorage.setItem('cumScore',score);
          localStorage.setItem('level',level);
          scoreEl.textContent=score; mainScoreEl.textContent=score; levelEl.textContent=level;
        }
      });
      startQuiz.addEventListener('click',()=>{
        answers=[]; userAnswers=[]; currentIndex=0;
        scoreBoard.style.visibility='visible';
        scoreEl.textContent=score; mainScoreEl.textContent=score; levelEl.textContent=level;
        showScreen('quiz'); showQuestion();
      });
      restart.addEventListener('click',()=>{ showScreen('mainMenu'); userAnswers=[]; });
      detailClose.addEventListener('click',()=>document.getElementById('detailModal').classList.remove('show'));
      function gen(types,min,max){
        const ops=types.includes('mix')?['add','sub','mul','div']:types;
        const op=ops[Math.floor(Math.random()*ops.length)];
        let A=Math.floor(Math.random()*(max-min+1))+min;
        let B=Math.floor(Math.random()*(max-min+1))+min;
        if(op==='div'){ B=Math.max(1,B); A=B*Math.floor(Math.random()*(Math.floor(max/B)||1)+1); }
        let q,ans;
        switch(op){
          case 'add': ans=A+B; q=`${A} + ${B}`; break;
          case 'sub': if(A<B)[A,B]=[B,A]; ans=A-B; q=`${A} - ${B}`; break;
          case 'mul': ans=A*B; q=`${A} × ${B}`; break;
          case 'div': ans=A/B; q=`${A} ÷ ${B}`; break;
        }
        return {q,ans};
      }
      function showQuestion(){
        clearInterval(countdown);
        const {q, ans} = gen(Array.from(selectedTypes), settings.min, settings.max);
        currentNumEl.textContent=currentIndex+1;
        questionEl.textContent=q;
        optionsEl.innerHTML='';
        answers.push(ans);
        const choices=new Set([ans]);
        while(choices.size<4){ let c=Math.floor(Math.random()*((ans+10)-(ans-10)+1))+(ans-10); if(c>=0)choices.add(c); }
        Array.from(choices).sort(()=>Math.random()-0.5).forEach((val,i)=>{
          const btn=document.createElement('button');
          btn.textContent=val; btn.className=`option-btn opt${i+1}`;
          btn.addEventListener('click',()=>selectAnswer(btn,val,ans));
          optionsEl.append(btn);
        });
        timerEl.textContent=settings.perQ;
        countdown=setInterval(()=>{
          let t=+timerEl.textContent-1; timerEl.textContent=t;
          if(t<=0){ clearInterval(countdown); selectAnswer(null,null,ans); }
        },1000);
      }
      function selectAnswer(btn,val,correct){
        clearInterval(countdown);
        userAnswers.push(val);
        optionsEl.querySelectorAll('button').forEach(b=>{ b.disabled=true; if(+b.textContent===correct) b.classList.add('correct'); });
        let delta=0;
        if(btn&&val===correct){
          if(soundEnabled){  
            soundC.currentTime = 0;  
            soundC.play();  
          }  
          const rawPts=Math.ceil(+timerEl.textContent*2);
          const pts=Math.min(rawPts,20);
          score+=pts; delta=pts;
          scoreEl.textContent=score; mainScoreEl.textContent=score;
          localStorage.setItem('cumScore',score);
          if(score>=1000){ score-=1000; level++; localStorage.setItem('level',level); levelEl.textContent=level; }
          const fly=document.createElement('span'); fly.textContent='+'+pts; fly.className='zigzagUp zigzagPositive'; document.body.appendChild(fly);
          const r=btn.getBoundingClientRect(); fly.style.left=(r.left+r.width/2)+'px'; fly.style.top=r.top+'px';
          fly.addEventListener('animationend',()=>fly.remove(),{once:true});
        } else {
          if(soundEnabled){  
            soundW.currentTime = 0;  
            soundW.play();  
            soundF.currentTime = 0;  
            soundF.play();
          }
          score-=7; delta=-7;
          scoreEl.textContent=score; mainScoreEl.textContent=score;
          localStorage.setItem('cumScore',score);
          const flyw=document.createElement('span'); flyw.textContent=delta; flyw.className='zigzagUp zigzagNegative'; document.body.appendChild(flyw);
          const r=btn?btn.getBoundingClientRect():{left:window.innerWidth/2,width:0,top:window.innerHeight/2};
          flyw.style.left=(r.left+r.width/2)+'px'; flyw.style.top=r.top+'px';
          flyw.addEventListener('animationend',()=>flyw.remove(),{once:true});
        }
        nextQuestionTimeout = setTimeout(()=>{
        currentIndex++;
        showQuestion();
        },1000);
       }
        // חיבור כפתור הבית לניווט למסך הראשי
     homeBtn.addEventListener('click', () => {
       clearInterval(countdown);
       clearTimeout(nextQuestionTimeout);
       scoreBoard.style.visibility = 'hidden';
       showScreen('mainMenu');
       openSettings.style.display = 'block';
       toggleSound.style.display  = 'block';
     });
  });
  </script>
  <footer>פותח על ידי מרדכי בן עזרא | כל הזכויות שמורות © 2025</footer>

  <!-- Register Service Worker for PWA -->
  <script>
    if ('serviceWorker' in navigator) {
      window.addEventListener('load', () => {
        navigator.serviceWorker.register('sw.js')
          .then(reg => console.log('Service Worker registered', reg))
          .catch(err => console.warn('Service Worker registration failed', err));
      });
    }
  </script>


<script>
  // Make site title clickable: reload or navigate to homepage
  const title = document.getElementById('site-title');
  if (title) {
    title.style.cursor = 'pointer';
    title.addEventListener('click', () => {
      // Reload current page
      window.location.href = window.location.origin + window.location.pathname;
    });
  }
</script>
</body>
</html>
