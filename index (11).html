<!DOCTYPE html>
<html lang="he">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
  <title>×ª×¨×’×•×œ ×—×©×‘×•×Ÿ ×× ×¦×— ğŸ† â€“ ××•×œ×˜×¨×”-××ª×’×¨×™ ×‘×—×™×‘×•×¨, ×—×™×¡×•×¨, ×›×¤×œ ×•×—×™×œ×•×§</title>

  <!-- Meta Tags ×œ×©×™×¤×•×¨ ×”×•×¤×¢×” ×‘×’×•×’×œ ×•×‘×¨×©×ª×•×ª ×—×‘×¨×ª×™×•×ª -->
  <meta name="description" content="×”×¦×˜×¨×¤×• ×¢×›×©×™×• ×œ×ª×¨×’×•×œ ×—×©×‘×•×Ÿ ×—×•×•×™×™×ª×™ ×œ×™×œ×“×™× ×•×œ××‘×•×’×¨×™×: ×—×™×‘×•×¨, ×—×™×¡×•×¨, ×›×¤×œ ×•×—×™×œ×•×§ ×‘×¡×’× ×•×Ÿ ×§×”×•×˜, ×¢× ×’×‘×™×¢×™ × ×™×¦×—×•×Ÿ ×•×©××™×¨×” ×¢×œ ×”×”×ª×§×“××•×ª ×©×œ×›×!">
  <meta property="og:type" content="website">
  <meta property="og:url" content="https://mordechai-ben-ezra.github.io/math-practice-site/">
  <meta property="og:title" content="×ª×¨×’×•×œ ×—×©×‘×•×Ÿ ×× ×¦×— ğŸ† â€“ ××•×œ×˜×¨×”-××ª×’×¨×™ ×‘×—×™×‘×•×¨, ×—×™×¡×•×¨, ×›×¤×œ ×•×—×™×œ×•×§">
  <meta property="og:description" content="×”×¦×˜×¨×¤×• ×¢×›×©×™×• ×œ×ª×¨×’×•×œ ×—×©×‘×•×Ÿ ×—×•×•×™×™×ª×™ ×œ×™×œ×“×™× ×•×œ××‘×•×’×¨×™×: ×—×™×‘×•×¨, ×—×™×¡×•×¨, ×›×¤×œ ×•×—×™×œ×•×§ ×‘×¡×’× ×•×Ÿ ×§×”×•×˜, ×¢× ×’×‘×™×¢×™ × ×™×¦×—×•×Ÿ ×•×©××™×¨×” ×¢×œ ×”×”×ª×§×“××•×ª ×©×œ×›×!">
  <meta property="og:image" content="https://mordechai-ben-ezra.github.io/math-practice-site/android-chrome-512x512.png">

  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:title" content="×ª×¨×’×•×œ ×—×©×‘×•×Ÿ ×× ×¦×— ğŸ† â€“ ××•×œ×˜×¨×”-××ª×’×¨×™ ×‘×—×™×‘×•×¨, ×—×™×¡×•×¨, ×›×¤×œ ×•×—×™×œ×•×§">
  <meta name="twitter:description" content="×”×¦×˜×¨×¤×• ×¢×›×©×™×• ×œ×ª×¨×’×•×œ ×—×©×‘×•×Ÿ ×—×•×•×™×™×ª×™ ×œ×™×œ×“×™× ×•×œ××‘×•×’×¨×™×: ×—×™×‘×•×¨, ×—×™×¡×•×¨, ×›×¤×œ ×•×—×™×œ×•×§ ×‘×¡×’× ×•×Ÿ ×§×”×•×˜, ×¢× ×’×‘×™×¢×™ × ×™×¦×—×•×Ÿ ×•×©××™×¨×” ×¢×œ ×”×”×ª×§×“××•×ª ×©×œ×›×!">
  <meta name="twitter:image" content="https://mordechai-ben-ezra.github.io/math-practice-site/android-chrome-512x512.png">

  <!-- Icons -->
  <link rel="apple-touch-icon" sizes="180x180" href="apple-touch-icon.png">
  <link rel="icon" type="image/png" sizes="32x32" href="favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="16x16" href="favicon-16x16.png">
  <link rel="icon" type="image/png" sizes="192x192" href="android-chrome-192x192.png">
  <link rel="icon" type="image/png" sizes="512x512" href="android-chrome-512x512.png">
  <link rel="manifest" href="site.webmanifest">
  <meta name="theme-color" content="#007bff">

  <style>
    .hidden { display: none; }
    :root {
      --primary: #007bff;
      --success: #28a745;
      --bg: #f0f4f8;
      --card: #fff;
      --text: #333;
      --radius: 8px;
      --transition: 0.3s;
    }
    * { box-sizing: border-box; }
    body {
      margin: 0;
      font-family: 'Segoe UI', sans-serif;
      background: var(--bg);
      color: var(--text);
      direction: rtl;
      padding: 1rem;
    }
    h1, h2 { text-align: center; color: var(--primary); }
    main { max-width: 600px; margin: auto; }
    section { background: var(--card); border-radius: var(--radius); box-shadow: 0 2px 6px rgba(0,0,0,0.1); margin-bottom: 1.5rem; padding: 1rem; }
    fieldset { border: 1px solid #ccc; border-radius: var(--radius); padding: 1rem; margin-bottom: 1rem; }
    legend { font-weight: bold; }
    .input-group { display: flex; gap: 0.5rem; align-items: center; margin-bottom: 0.75rem; }
    label { cursor: pointer; }
    input[type="number"] { width: 4rem; padding: 0.3rem; border: 1px solid #ccc; border-radius: var(--radius); }
    button { padding: 0.75rem; border: none; border-radius: var(--radius); cursor: pointer; transition: transform var(--transition), background var(--transition); }
    button.primary { background: var(--primary); color: #fff; width: 100%; font-size: 1rem; }
    button.primary:hover { transform: translateY(-2px); }

    #question { background: var(--card); padding: 1rem; margin: 1rem 0; border-radius: var(--radius); font-size: 1.5em; text-align: center; }
    .option-btn { display: block; width: 100%; padding: 0.75rem; margin: 0.5rem 0; background: #ddd; border-radius: var(--radius); font-size: 1.1em; }
    .option-btn:hover { filter: brightness(1.05); transform: translateY(-1px); }
    .correct { background: var(--success) !important; color: #fff !important; }
    .wrong { background: #dc3545 !important; color: #fff !important; }

    #timer { text-align: center; margin-bottom: 1rem; }
    .progress-wrapper { display: flex; gap: 0.5rem; align-items: center; margin-bottom: 1rem; }

    #certificate {
      position: fixed; top: 0; left: 0; width: 100%; height: 100%;
      background: rgba(0,0,0,0.6); display: flex;
      align-items: center; justify-content: center; visibility: hidden;
    }
    #certificate .card {
      background: var(--card); padding: 2rem; border-radius: var(--radius); text-align: center;
      animation: fadeIn 0.5s ease-out;
    }
    @keyframes fadeIn { from { opacity: 0; transform: translateY(20px); } to { opacity: 1; transform: translateY(0); } }

    #resultsList { list-style: none; padding: 0; } 
    #resultsList li { background: #e9ecef; padding: 0.75rem; margin: 0.5rem 0; border-radius: var(--radius); }

    @media (max-width: 600px) { #question { font-size: 1.2em; } button { font-size: 0.9em; } }
  </style>
</head>
<body>
  <main>
    <h1>×ª×¨×’×•×œ ×—×©×‘×•×Ÿ ×× ×¦×— ğŸ†</h1>
    <section id="setup">
      <h2>×”×’×“×¨×•×ª ×”×ª×¨×’×•×œ</h2>
      <fieldset>
        <legend>×‘×—×¨ ×¡×•×’ ×ª×¨×’×™×œ×™×</legend>
        <label><input type="checkbox" name="type" value="add"> ×—×™×‘×•×¨</label>
        <label><input type="checkbox" name="type" value="sub"> ×—×™×¡×•×¨</label>
        <label><input type="checkbox" name="type" value="mul"> ×›×¤×œ</label>
        <label><input type="checkbox" name="type" value="div"> ×—×™×œ×•×§</label>
        <label><input type="checkbox" name="type" value="mix"> ×¢×¨×‘×•×‘</label>
      </fieldset>
      <div class="input-group">
        <label for="min">×</label><input id="min" type="number" value="1" min="0">
        <label for="max">×¢×“</label><input id="max" type="number" value="10" min="0">
      </div>
      <div class="input-group">
        <label for="count">×›××•×ª ×ª×¨×’×™×œ×™×</label><input id="count" type="number" value="5" min="1">
      </div>
      <div class="input-group">
        <label for="timePerQ">×–××Ÿ ×œ×©××œ×” (×©')</label><input id="timePerQ" type="number" value="15" min="1">
      </div>
      <button id="start" class="primary">×”×ª×—×œ ×‘×ª×¨×’×•×œ</button>
    </section>

    <section id="quiz" class="hidden">
      <h2>×ª×¨×’×™×œ <span id="currentNum"></span> ××ª×•×š <span id="totalNum"></span></h2>
      <div class="progress-wrapper">
        <progress id="progress" max="100" value="0"></progress><span id="progressText">0%</span>
      </div>
      <div id="timer">×–××Ÿ × ×•×ª×¨: <span id="timeDisplay"></span> ×©'</div>
      <div id="question"></div>
      <div id="options"></div>
      <button id="next" class="primary hidden">×”××©×š ×œ×ª×¨×’×™×œ ×”×‘×</button>
    </section>

    <section id="results" class="hidden">
      <h2>×”×ª×•×¦××•×ª ×©×œ×š</h2>
      <ul id="resultsList"></ul>
      <button id="restart" class="primary">× ×¡×” ×©×•×‘</button>
    </section>
  </main>

  <div id="certificate">
    <div class="card">
      <h2>×›×œ ×”×›×‘×•×“!</h2>
      <p id="finalScore"></p>
      <button id="closeCert" class="primary">×¡×’×•×¨</button>
    </div>
  </div>

  <script>
    document.addEventListener('DOMContentLoaded', () => {
      const setupEl = document.getElementById('setup');
      const quizEl = document.getElementById('quiz');
      const resultsEl = document.getElementById('results');
      const startBtn = document.getElementById('start');
      const nextBtn = document.getElementById('next');
      const restartBtn = document.getElementById('restart');
      const closeCert = document.getElementById('closeCert');
      const currentNumEl = document.getElementById('currentNum');
      const totalNumEl = document.getElementById('totalNum');
      const questionEl = document.getElementById('question');
      const optionsEl = document.getElementById('options');
      const timerEl = document.getElementById('timeDisplay');
      const progressBar = document.getElementById('progress');
      const progressText = document.getElementById('progressText');
      const resultsList = document.getElementById('resultsList');
      const certOverlay = document.getElementById('certificate');
      const finalScore = document.getElementById('finalScore');

      let exercises = [], userResults = [], currentIndex = 0, perQSec = 15, countdown;
      const colorPalette = ['#ffadad','#ffd6a5','#caffbf','#9bf6ff'];

      function rand(min, max) {
        return Math.floor(Math.random() * (max - min + 1)) + min;
      }

      function genExercise(types, min, max) {
        const ops = types.includes('mix') ? ['add','sub','mul','div'] : types;
        const op = ops[rand(0, ops.length-1)];
        let a = rand(min, max), b = rand(min, max), ans;
        let q;
        switch(op) {
          case 'add': ans = a + b; q = `${a} + ${b}`; break;
          case 'sub':
            if (a < b) [a, b] = [b, a];
            ans = a - b;
            q = `${a} - ${b}`;
            break;
          case 'mul': ans = a * b; q = `${a} Ã— ${b}`; break;
          case 'div':
            b = rand(min, max) || 1;
            a = b * rand(min, max);
            ans = a / b;
            q = `${a} Ã· ${b}`;
            break;
        }
        return { q, ans };
      }

      function showQuestion() {
        clearInterval(countdown);
        const { q, ans } = exercises[currentIndex];
        currentNumEl.textContent = currentIndex + 1;
        questionEl.textContent = q;
        optionsEl.innerHTML = '';
        const choices = new Set([ans]);
        while (choices.size < 4) {
          const c = rand(ans-10, ans+10);
          if (c >= 0) choices.add(c);
        }
        Array.from(choices).sort(() => Math.random() - 0.5)
          .forEach((val, idx) => {
            const btn = document.createElement('button');
            btn.textContent = val;
            btn.className = 'option-btn';
            btn.style.backgroundColor = colorPalette[idx % colorPalette.length];
            btn.onclick = () => selectAnswer(btn, val, ans);
            optionsEl.appendChild(btn);
          });

        const pct = Math.round((currentIndex / exercises.length) * 100);
        progressBar.value = pct;
        progressText.textContent = pct + '%';

        let sec = perQSec;
        timerEl.textContent = sec;
        countdown = setInterval(() => {
          sec--;
          timerEl.textContent = sec;
          if (sec <= 0) selectAnswer(null, null, ans);
        }, 1000);

        nextBtn.classList.add('hidden');
      }

      function selectAnswer(btn, val, correct) {
        clearInterval(countdown);
        Array.from(optionsEl.children).forEach(b => {
          b.disabled = true;
          if (+b.textContent === correct) b.classList.add('correct');
        });
        if (btn && val !== correct) btn.classList.add('wrong');
        userResults.push(btn && val === correct);
        nextBtn.classList.remove('hidden');
      }

      function showResults() {
        quizEl.classList.add('hidden');
        resultsEl.classList.remove('hidden');
        resultsList.innerHTML = '';
        userResults.forEach((ok, i) => {
          const li = document.createElement('li');
          li.textContent = `×ª×¨×’×™×œ ${i+1}: ${ok ? 'âœ… × ×›×•×Ÿ' : 'âŒ ×©×’×•×™'}`;
          resultsList.appendChild(li);
        });
        const score = userResults.filter(Boolean).length;
        finalScore.textContent = `×¦×™×•×Ÿ ×¡×•×¤×™: ${score} ××ª×•×š ${exercises.length}`;
        certOverlay.style.visibility = 'visible';
      }

      startBtn.addEventListener('click', () => {
        const types = Array.from(setupEl.querySelectorAll('input[name="type"]:checked')).map(i => i.value);
        const min = +document.getElementById('min').value;
        const max = +document.getElementById('max').value;
        const count = +document.getElementById('count').value;
        perQSec = +document.getElementById('timePerQ').value;
        exercises = Array.from({ length: count }, () => genExercise(types, min, max));
        userResults = []; currentIndex = 0;
        totalNumEl.textContent = exercises.length;
        setupEl.classList.add('hidden');
        quizEl.classList.remove('hidden');
        showQuestion();
      });

      nextBtn.addEventListener('click', () => {
        currentIndex++;
        if (currentIndex < exercises.length) showQuestion();
        else showResults();
      });

      restartBtn.addEventListener('click', () => {
        resultsEl.classList.add('hidden');
        setupEl.classList.remove('hidden');
        resultsList.innerHTML = '';
        scoreText.textContent = '';
      });

      closeCert.addEventListener('click', () => {
        certOverlay.style.visibility = 'hidden';
      });
    });
  </script>
</body>
</html>
